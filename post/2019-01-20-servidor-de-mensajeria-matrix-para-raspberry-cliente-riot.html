<head>
<title> Servidor de Mensajería Matrix para Raspberry. Cliente Riot. uGeek Blog </title>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<div id="logo"><a href="https://ugeek.github.io"><img src="../icon/ugeek.png" border="0"  width="90" height="90" alt="uGeek"></a></div>
<link rel="stylesheet" type="text/css" href="../css/stylesheet.css" /><link rel="alternate" type="application/rss+xml" href="https://ugeek.github.io/feed.xml" title="uGeek - Blog de Tecnología">
 <meta name="twitter:site" content="@ugeekpodcast" /> <meta name="twitter:card" content="summary_large_image" /> <link rel="alternate" type="application/rss+xml" title="uGeek. Blog de Tecnología" href="https://ugeek.github.io/feed/" /> 
</head>

<br><br><br><br><br><br><br><br><br><br>

 <link href=http://fonts.googleapis.com/css?family=Lato rel=stylesheet type=text/css/> <div id="name"><a href="https://ugeek.github.io/"><tt>Blog del Podcast</tt></div></a> <div id="icon"> <a href="http://feeds.feedburner.com/uGeek" title="rss" alt="rss"><img src="../icon/podcast.png" width="25" height="25" alt="podcast"></a>&nbsp;&nbsp; <a href="http://feeds.feedburner.com/uGeekBlog" alt="rss"><img src="../icon/rss.png" width="25" height="25"></a>&nbsp;&nbsp; <a href="https://github.com/ugeek"><img src="../icon/github.png" width="25" height="25" alt="GitHub"></a>&nbsp;&nbsp; <a href="https://open.spotify.com/show/1pZRMO6ClMS2jCktwF3I8H" alt="rss"><img src="../icon/spotify.png" width="25" height="25"></a>&nbsp;&nbsp; <a href="https://twitter.com/ugeekpodcast"><img src="../icon/twitter.png" width="25" height="25" alt="Twitter"></a>&nbsp;&nbsp; <a href="https://t.me/uGeek"><img src="../icon/telegram.png" width="25" height="25" alt="Telegram"></a></div> <div id="menu"> <a href="https://ugeek.github.io/blog/list.html"><tt>Artículos</tt></a>&nbsp;&nbsp; <a href="https://ugeek.github.io/list.html"><tt>Podcasts</tt></a>&nbsp;&nbsp; <a href="https://ugeek.github.io/tags.html"><tt>Tags</tt></a></div>

<h1 id="servidor-de-mensajería-matrix-para-raspberry.-cliente-riot." title="Servidor de Mensajería Matrix para Raspberry. Cliente Riot" data-export_file_name="Servidor de Mensajeria Matrix para Raspberry Cliente Riot" data-description="Hace algo mas de un mes, estoy utilizando Matrix Synapse, juntamente con el cliente Riot, a través de mi servidor-raspberry de forma totalmente privada y teniendo la totalidad de la gestión del servicio como los usuarios registrados. De momento, no he federado mi servidor, de manera que únicamente podremos comunicarnos los usuarios registrados en este servidor." data-export_date="2019-01-20 19:26" data-category="mensajeria" data-tag="servidor, raspberry" data-image="./icon/ugeek.png">Servidor de Mensajería Matrix para Raspberry. Cliente Riot.</h1>
<p>Hace algo mas de un mes, estoy utilizando Matrix Synapse, juntamente con el cliente Riot, a través de mi servidor-raspberry de forma totalmente privada y teniendo la totalidad de la gestión del servicio como los usuarios registrados. De momento, no he federado mi servidor, de manera que únicamente podremos comunicarnos los usuarios registrados en este servidor.</p>
<p>Voy a explicaros paso a paso, como crear vuestro servidor en raspbian y si abrís los puertos del servicio, podréis comunicaros dentro y fuera de vuestra red local, con una de las aplicaciones de comunicación de Software Libre, mas seguras que existen en la actualidad, ya que posee de doble cifrado de datos.</p>
<p>Características:</p>
<ul>
<li>Mensajería</li>
<li>Ilimitadas Salas donde poder compartir mensajes, imágenes, archivos,…</li>
<li>Llamadas</li>
<li>Video Llamadas</li>
<li>Doble Cifrados</li>
<li>Varios Clientes y totalmente multiplataforma</li>
</ul>
<h2 id="instalación-del-servidor-en-raspbian">INSTALACIÓN DEL SERVIDOR EN RASPBIAN</h2>
<pre><code>sudo apt-get install build-essential python2.7-dev libffi-dev \
                     python-pip python-setuptools sqlite3 \
                     libssl-dev python-virtualenv libjpeg-dev
sudo pip install --upgrade pip
sudo pip install --upgrade ndg-httpsclient
sudo pip install --upgrade virtualenv
</code></pre>
<p>Este segunda comando ten paciencia, se crearan los certificados, etc … y <strong>tardará mucho tiempo, probablemente una hora</strong>, recomiendo detener servicios</p>
<pre><code>virtualenv -p python2.7 ~/.synapse
source ~/.synapse/bin/activate
pip install --upgrade pip
pip install --upgrade setuptools
pip install https://github.com/matrix-org/synapse/tarball/master
</code></pre>
<p>Instala también el modulo para synapse.app.</p>
<p><code>pip install (--upgrade) synapseclient</code></p>
<h2 id="configurar-synapse">CONFIGURAR SYNAPSE</h2>
<p>Recuerda sustituir el nombre del servidor <strong>my.domain.name</strong> En –report-stats= tienes que seleccionar <strong>yes o no</strong>.</p>
<p><code>cd ~/.synapse</code></p>
<pre><code>python2.7 -B -m synapse.app.homeserver \
    --server-name=my.domain.name \
    --config-path=homeserver.yaml \
    --generate-config \
    --report-stats=[yes|no]
</code></pre>
<h2 id="iniciar-servidor">INICIAR SERVIDOR</h2>
<ol>
<li>Nos situamos en la carpeta de <strong>synapse</strong></li>
</ol>
<p><code>cd ~/.synapse</code></p>
<ol>
<li>Iniciar el servidor</li>
</ol>
<p><code>source ./bin/activate ; synctl start</code></p>
<p>La Terminal nos devolverá que por el puerto 8008, encontraremos una inferfaz de gestión. Esta es antigua, <strong>no te recomiendo que la uses</strong>, te recomiendo crear ususarios mediante el comando que veremos mas adelante. <strong>Detener el servicio, si lo deseamos:</strong></p>
<p><code>source ./bin/activate ; synctl stop</code></p>
<p>CREAR USUARIOS</p>
<p>Iniciamos el servidor y situándonos dentro del directorio <strong>.synapse</strong></p>
<p><code>cd ~/.synapse</code></p>
<p>Ejecutaremos el siguiente comando:</p>
<p><code>register_new_matrix_user -c homeserver.yaml https://localhost:8448</code></p>
<p>Ahora nos preguntará por el usuario, contraseña y si este usuario es administrador o no.</p>
<h2 id="utilizar-el-cliente-riot">UTILIZAR EL CLIENTE RIOT</h2>
<p><img src="../images-blog/riot.png" /></p>
<ol>
<li>Pondermos en nombre de usuario y contraseña</li>
<li>Habilitamos opciones de servidor propietarias</li>
<li>En servidor, ponemos <a href="https://ip:8448">https://ip:8448</a></li>
</ol>
<p>ENCONTRARSE LOS USUARIOS</p>
<ol>
<li>Creamos una sala</li>
<li>En configuración de la sala, en <strong>acceso a la Sala</strong> y seleccionamos:</li>
</ol>
<p>“Los que saben el enlace de la sala, incluso huespedes”</p>
<p>3 )Ahora en <strong>Avanzado</strong>, compartimos al otro usuario <strong>La identificación interna de esta Sala</strong></p>
<br>
<p>Publicado por Angel el domingo 20 enero del 2019</p>
<br><br> 
<p>También te puede interesar:</p>
<ul>
<li><a href="https://ugeek.github.io/blog/post/2019-01-20-servidor-de-mensajeria-matrix-para-raspberry-cliente-riot.html">Servidor de Mensajería Matrix para Raspberry. Cliente Riot</a></li>
</ul>
<br><br><br><p style="text-align: center;">Powered by <a href="https://github.com/ugeek/org-bash-blog" target="_blank" rel="noopener">org-bash-blog</a></p><p style="text-align: center;">Writing in orgmode whith emacs</p> <p style="text-align: center;"><a href="http://creativecommons.org/licenses/by-nc-sa/4.0/" rel="license"><img style="border-width: 0px; display: block; margin-left: auto; margin-right: auto;" src="https://i.creativecommons.org/l/by-nc-sa/4.0/88x31.png" alt="Licencia de Creative Commons" /></a><br />Este obra est&aacute; bajo una <a href="http://creativecommons.org/licenses/by-nc-sa/4.0/" rel="license">licencia de Creative Commons Reconocimiento-NoComercial-CompartirIgual 4.0 Internacional</a>.</p><br><br><br>
